<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>

	<groupId>nl.gatso.haarlemtools</groupId>
	<artifactId>gsmj2convert</artifactId>
	<version>1.15.1.10</version>

	<packaging>jar</packaging>

	<name>GSMJ2 Convert</name>

	<properties>
		<fontbox.version>2.0.2</fontbox.version>
		<gluegen.version>2.2.4</gluegen.version>
		<haarlemtools.jgsmdframework.version>0.1</haarlemtools.jgsmdframework.version>
		<haarlemtools.jgsmedia.version>0.1</haarlemtools.jgsmedia.version>
		<haarlemtools.offlineviewer.version>3.12.4.14</haarlemtools.offlineviewer.version>
		<haarlemtools.offlineviewerplugin.version>0.1</haarlemtools.offlineviewerplugin.version>
		<haarlemtools.plugins.overlays.polygon.version>0.1</haarlemtools.plugins.overlays.polygon.version>
		<haarlemtools.plugins.overlays.triggerlines.version>0.1</haarlemtools.plugins.overlays.triggerlines.version>
		<imgscalr.lib.version>4.2</imgscalr.lib.version>
		<jacoco.version>0.8.3</jacoco.version>
		<java.version>1.8</java.version>
		<jaxen.version>1.1.6</jaxen.version>
		<jdom2.version>2.0.6</jdom2.version>
		<jna.version>5.9.0</jna.version>
		<jogl.all.main.version>2.2.4</jogl.all.main.version>
		<launch4j.maven.plugin.version>1.7.25</launch4j.maven.plugin.version>
		<log4j2.version>2.17.1</log4j2.version>
		<main.class>nl.gatso.haarlemtools.gsmj2convert.gsmj2convert.GSMJ2Convert</main.class>
		<maven.assembly.plugin.version>3.1.1</maven.assembly.plugin.version>
		<maven.compiler.plugin.version>3.8.1</maven.compiler.plugin.version>
		<maven.jar.plugin.version>3.2.0</maven.jar.plugin.version>
		<maven.javadoc.skip>true</maven.javadoc.skip>
		<maven.source.plugin.version>3.2.1</maven.source.plugin.version>
		<maven.surefire.plugin.version>2.22.0</maven.surefire.plugin.version>
		<pdfbox.app.version>2.0.2</pdfbox.app.version>
		<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
		<slf4j.api.version>1.7.30</slf4j.api.version>
		<sortpom.maven.plugin.version>2.11.0</sortpom.maven.plugin.version>
		<xmpbox.version>2.0.2</xmpbox.version>
	</properties>

	<dependencies>
		<dependency>
			<groupId>net.java.dev.jna</groupId>
			<artifactId>jna</artifactId>
			<version>${jna.version}</version>
		</dependency>
		<dependency>
			<groupId>jaxen</groupId>
			<artifactId>jaxen</artifactId>
			<version>${jaxen.version}</version>
		</dependency>
		<dependency>
			<groupId>org.apache.pdfbox</groupId>
			<artifactId>xmpbox</artifactId>
			<version>${xmpbox.version}</version>
		</dependency>
		<dependency>
			<groupId>org.jogamp.jogl</groupId>
			<artifactId>jogl-all-main</artifactId>
			<version>${jogl.all.main.version}</version>
		</dependency>
		<dependency>
			<groupId>org.apache.logging.log4j</groupId>
			<artifactId>log4j-api</artifactId>
			<version>${log4j2.version}</version>
		</dependency>
		<dependency>
			<groupId>org.apache.logging.log4j</groupId>
			<artifactId>log4j-core</artifactId>
			<version>${log4j2.version}</version>
		</dependency>
		<dependency>
			<groupId>org.apache.logging.log4j</groupId>
			<artifactId>log4j-slf4j-impl</artifactId>
			<version>${log4j2.version}</version>
		</dependency>
		<dependency>
			<groupId>org.slf4j</groupId>
			<artifactId>slf4j-api</artifactId>
			<version>${slf4j.api.version}</version>
		</dependency>
		<dependency>
			<groupId>org.apache.pdfbox</groupId>
			<artifactId>pdfbox-app</artifactId>
			<version>${pdfbox.app.version}</version>
		</dependency>
		<dependency>
			<groupId>org.jogamp.gluegen</groupId>
			<artifactId>gluegen</artifactId>
			<version>${gluegen.version}</version>
		</dependency>
		<dependency>
			<groupId>nl.gatso.haarlemtools</groupId>
			<artifactId>offlineviewerplugin</artifactId>
			<version>${haarlemtools.offlineviewerplugin.version}</version>
		</dependency>
		<dependency>
			<groupId>nl.gatso.haarlemtools</groupId>
			<artifactId>offlineviewer</artifactId>
			<version>${haarlemtools.offlineviewer.version}</version>
		</dependency>
		<dependency>
			<groupId>org.apache.pdfbox</groupId>
			<artifactId>fontbox</artifactId>
			<version>${fontbox.version}</version>
		</dependency>
		<dependency>
			<groupId>nl.gatso.haarlemtools</groupId>
			<artifactId>jgsmdframework</artifactId>
			<version>${haarlemtools.jgsmdframework.version}</version>
		</dependency>
		<dependency>
			<groupId>nl.gatso.haarlemtools</groupId>
			<artifactId>jgsmedia</artifactId>
			<version>${haarlemtools.jgsmedia.version}</version>
		</dependency>
		<dependency>
			<groupId>nl.gatso.haarlemtools</groupId>
			<artifactId>plugins.overlays.triggerlines</artifactId>
			<version>${haarlemtools.plugins.overlays.triggerlines.version}</version>
		</dependency>
		<dependency>
			<groupId>org.jdom</groupId>
			<artifactId>jdom2</artifactId>
			<version>${jdom2.version}</version>
		</dependency>
		<dependency>
			<groupId>nl.gatso.haarlemtools</groupId>
			<artifactId>plugins.overlays.polygon</artifactId>
			<version>${haarlemtools.plugins.overlays.polygon.version}</version>
		</dependency>
		<dependency>
			<groupId>org.imgscalr</groupId>
			<artifactId>imgscalr-lib</artifactId>
			<version>${imgscalr.lib.version}</version>
		</dependency>
	</dependencies>

	<build>
		<finalName>GSMJ2Convert</finalName>
		<plugins>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-compiler-plugin</artifactId>
				<version>${maven.compiler.plugin.version}</version>
				<configuration>
					<source>${java.version}</source>
					<target>${java.version}</target>
				</configuration>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-jar-plugin</artifactId>
				<version>${maven.jar.plugin.version}</version>
				<configuration>
					<archive>
						<manifest>
							<addDefaultImplementationEntries>true</addDefaultImplementationEntries>
						</manifest>
						<manifestEntries>
							<Main-Class>${main.class}</Main-Class>
						</manifestEntries>
					</archive>
				</configuration>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-assembly-plugin</artifactId>
				<version>${maven.assembly.plugin.version}</version>
				<configuration>
					<descriptorRefs>
						<descriptorRef>jar-with-dependencies</descriptorRef>
					</descriptorRefs>
					<archive>
						<manifestEntries>
							<Built-By>Sensys Gatso</Built-By>
						</manifestEntries>
						<manifest>
							<addDefaultImplementationEntries>true</addDefaultImplementationEntries>
							<mainClass>${main.class}</mainClass>
						</manifest>
					</archive>
				</configuration>
				<executions>
					<execution>
						<id>make-assembly</id>
						<goals>
							<goal>single</goal>
						</goals>
						<phase>package</phase>
					</execution>
				</executions>
			</plugin>
			<plugin>
				<groupId>com.akathist.maven.plugins.launch4j</groupId>
				<artifactId>launch4j-maven-plugin</artifactId>
				<version>${launch4j.maven.plugin.version}</version>
				<executions>
					<execution>
						<id>l4j-clui</id>
						<goals>
							<goal>launch4j</goal>
						</goals>
						<phase>package</phase>
						<configuration>
							<dontWrapJar>true</dontWrapJar>
							<headerType>console</headerType>
							<jar>target/GSMJ2Convert-jar-with-dependencies.jar</jar>
							<outfile>target/GSMJ2Convert.exe</outfile>
							<priority>normal</priority>
							<downloadUrl>http://java.com/download</downloadUrl>
							<stayAlive>false</stayAlive>
							<restartOnCrash>false</restartOnCrash>
							<icon>..\Setups\Resources\GATSOnew.ico</icon>
							<classPath>
								<mainClass>${main.class}</mainClass>
								<postCp>GSMJ2Convert.jar</postCp>
							</classPath>
							<jre>
								<bundledJre64Bit>false</bundledJre64Bit>
								<bundledJreAsFallback>false</bundledJreAsFallback>
								<minVersion>1.8.0</minVersion>
								<jdkPreference>preferJre</jdkPreference>
								<runtimeBits>64</runtimeBits>
								<opts>
									<opt>-Xmx2g</opt>
								</opts>
							</jre>
							<versionInfo>
								<fileVersion>${project.version}</fileVersion>
								<txtFileVersion>${project.version}</txtFileVersion>
								<fileDescription>GS MJ2 Convert (GSMJ2Convert)</fileDescription>
								<copyright>Copyright ï¿½ 2012 - 2021 Gatsometer B.V.</copyright>
								<productVersion>${project.version}</productVersion>
								<txtProductVersion>${project.version}</txtProductVersion>
								<productName>GS MJ2 Convert (GSMJ2Convert)</productName>
								<internalName>GSMJ2Convert</internalName>
								<originalFilename>GSMJ2Convert.exe</originalFilename>
								<language>ENGLISH_US</language>
							</versionInfo>
						</configuration>
					</execution>
				</executions>
			</plugin>
			<plugin>
				<groupId>com.coderplus.maven.plugins</groupId>
				<artifactId>copy-rename-maven-plugin</artifactId>
				<version>1.0</version>
				<executions>
					<execution>
						<id>copy-file</id>
						<goals>
							<goal>copy</goal>
						</goals>
						<phase>generate-sources</phase>
						<configuration>
							<fileSets>
								<!-- Windows -->
								<fileSet>
									<sourceFile>${project.basedir}/../Setups/Setup_GSMJ2Convert - Windows/libGSMediaLib64.dll</sourceFile>
									<destinationFile>${project.basedir}/target/libGSMediaLib.dll</destinationFile>
								</fileSet>
								<fileSet>
									<sourceFile>${project.basedir}/../Setups/Setup_GSMJ2Convert - Windows/ffmpeg.exe</sourceFile>
									<destinationFile>${project.basedir}/target/ffmpeg.exe</destinationFile>
								</fileSet>
								<fileSet>
									<sourceFile>${project.basedir}/../Setups/Setup_GSMJ2Convert - Windows/openssl.exe</sourceFile>
									<destinationFile>${project.basedir}/target/openssl.exe</destinationFile>
								</fileSet>
								<!-- Mac OS-->
								<fileSet>
									<sourceFile>${project.basedir}/../Setups/Setup_GSMediaLibrary - OS-X/Binaries/OS-X/libGSMediaLib.a</sourceFile>
									<destinationFile>${project.basedir}/target/libGSMediaLib.a</destinationFile>
								</fileSet>
								<fileSet>
									<sourceFile>${project.basedir}/../Setups/Setup_OfflineViewer - OS-X/OfflineViewer.app/Contents/MacOS/libGSMediaLib.dylib</sourceFile>
									<destinationFile>${project.basedir}/target/libGSMediaLib.dylib</destinationFile>
								</fileSet>
								<!-- InnoIDE -->
								<fileSet>
									<sourceFile>${project.basedir}/../Setups/Resources/GatsoLicenseAgreement.rtf</sourceFile>
									<destinationFile>${project.basedir}/target/Resources/GatsoLicenseAgreement.rtf</destinationFile>
								</fileSet>
								<fileSet>
									<sourceFile>${project.basedir}/docs/GSMJ2Convert Release Notes.rtf</sourceFile>
									<destinationFile>${project.basedir}/target/docs/GSMJ2Convert Release Notes.rtf</destinationFile>
								</fileSet>
								<fileSet>
									<sourceFile>${project.basedir}/docs/GSMJ2Convert Release Notes.txt</sourceFile>
									<destinationFile>${project.basedir}/target/docs/GSMJ2Convert Release Notes.txt</destinationFile>
								</fileSet>
								<fileSet>
									<sourceFile>${project.basedir}/docs/GSMJ2Convert After.rtf</sourceFile>
									<destinationFile>${project.basedir}/target/docs/GSMJ2Convert After.rtf</destinationFile>
								</fileSet>
								<fileSet>
									<sourceFile>${project.basedir}/docs/gsmj2convert_help.txt</sourceFile>
									<destinationFile>${project.basedir}/target/docs/gsmj2convert_help.txt</destinationFile>
								</fileSet>
								<fileSet>
									<sourceFile>${project.basedir}/../Setups/Resources/GATSOnew.ico</sourceFile>
									<destinationFile>${project.basedir}/target/Resources/GATSOnew.ico</destinationFile>
								</fileSet>
								<fileSet>
									<sourceFile>${project.basedir}/../Setups/Resources/GATSOSetup.bmp</sourceFile>
									<destinationFile>${project.basedir}/target/Resources/GATSOSetup.bmp</destinationFile>
								</fileSet>
								<fileSet>
									<sourceFile>${project.basedir}/../Setups/Resources/GATSO_small.bmp</sourceFile>
									<destinationFile>${project.basedir}/target/Resources/GATSO_small.bmp</destinationFile>
								</fileSet>
								<fileSet>
									<sourceFile>${project.basedir}/../Setups/Setup_GSMJ2Convert - Windows\StartConvert.bat</sourceFile>
									<destinationFile>${project.basedir}/target/Resources\StartConvert.bat</destinationFile>
								</fileSet>
							</fileSets>
						</configuration>
					</execution>
				</executions>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-surefire-plugin</artifactId>
				<version>${maven.surefire.plugin.version}</version>
				<configuration>
					<parallel>classes</parallel>
					<useUnlimitedThreads>true</useUnlimitedThreads>
				</configuration>
			</plugin>
			<plugin>
				<groupId>org.jacoco</groupId>
				<artifactId>jacoco-maven-plugin</artifactId>
				<version>${jacoco.version}</version>
				<executions>
					<execution>
						<goals>
							<goal>prepare-agent</goal>
						</goals>
					</execution>
					<execution>
						<id>jacoco-report</id>
						<goals>
							<goal>report</goal>
						</goals>
						<phase>test</phase>
					</execution>
					<execution>
						<id>jacoco-check</id>
						<goals>
							<goal>check</goal>
						</goals>
						<configuration>
							<rules>
								<rule>
									<limits>
										<limit>
											<counter>LINE</counter>
											<minimum>0.80</minimum>
										</limit>
										<limit>
											<counter>CLASS</counter>
											<minimum>0.90</minimum>
										</limit>
									</limits>
								</rule>
							</rules>
						</configuration>
					</execution>
				</executions>
			</plugin>
			<plugin>
				<groupId>com.github.ekryd.sortpom</groupId>
				<artifactId>sortpom-maven-plugin</artifactId>
				<version>${sortpom.maven.plugin.version}</version>
				<configuration>
					<predefinedSortOrder>custom_1</predefinedSortOrder>
					<lineSeparator>\n</lineSeparator>
					<encoding>${project.build.sourceEncoding}</encoding>
					<sortProperties>true</sortProperties>
					<keepBlankLines>true</keepBlankLines>
					<sortDependencies>scope</sortDependencies>
					<createBackupFile>false</createBackupFile>
					<nrOfIndentSpace>-1</nrOfIndentSpace>
				</configuration>
				<executions>
					<execution>
						<goals>
							<goal>sort</goal>
						</goals>
						<phase>compile</phase>
					</execution>
				</executions>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-source-plugin</artifactId>
				<version>${maven.source.plugin.version}</version>
				<executions>
					<execution>
						<id>attach-sources</id>
						<goals>
							<goal>jar</goal>
						</goals>
					</execution>
				</executions>
			</plugin>
		</plugins>
	</build>

</project>
